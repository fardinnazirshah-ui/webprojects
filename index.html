<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JEE College Predictor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>JEE College Predictor</h1>
        <form method="POST" action="/predict">
            <div class="form-group">
                <label for="rank">JEE Rank:</label>
                <input type="number" id="rank" name="rank" required min="1" step="1" placeholder="Enter your rank">
            </div>
            <div class="form-group">
                <label for="exam_type">Exam Type:</label>
                <select id="exam_type" name="exam_type" required>
                    <option value="">-- Select --</option>
                    <option value="Main">JEE Main</option>
                    <option value="Advanced">JEE Advanced</option>
                </select>
            </div>
            <div class="form-group">
                <label for="category">Category:</label>
                <select id="category" name="category">
                    <option value="OPEN">OPEN</option>
                    <option value="EWS">EWS</option>
                    <option value="OBC-NCL">OBC-NCL</option>
                    <option value="SC">SC</option>
                    <option value="ST">ST</option>
                </select>
            </div>
            <button type="submit">Predict Colleges</button>
        </form>
        {% if error %}
            <div class="alert alert-error">{{ error }}</div>
        {% endif %}
        {% if results %}
        <div class="results">
            <h2>Predictions for {{ rank }}</h2>
            <p class="info">Exam: {{ exam_type }}, Category: {{ category }}, Results: {{ results|length }}</p>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Institute</th>
                            <th>Branch</th>
                            <th>Avg Opening</th>
                            <th>Avg Closing</th>
                            <th>Best</th>
                            <th>Worst</th>
                            <th>Probability</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for college in results %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ college.institute }}</td>
                            <td>{{ college.branch }}</td>
                            <td>{{ college.avg_opening }}</td>
                            <td>{{ college.avg_closing }}</td>
                            <td>{{ college.best_closing }}</td>
                            <td>{{ college.worst_closing }}</td>
                            <td><span class="probability">{{ college.probability }}%</span></td>
                            <td><span class="status-{{ college.status.replace(' ', '-').lower() }}">{{ college.status }}</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endif %}
        <footer>
            <p>JEE College Predictor &copy; 2025</p>
        </footer>
    </div>
    <script>
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        themeToggle.addEventListener('click', () => {
            const theme = html.getAttribute('data-theme');
            const newTheme = theme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });
    </script>
</body>
</html>
